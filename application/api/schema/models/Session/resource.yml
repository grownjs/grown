id: Session

service:
  calls:
  - get: info
    resp: Me
    input: TokenParams
    params: TokenRequest
  - set: login
    resp: Me
    input: LoginParams
    params: LoginRequest
  - set: logout
    resp: Success
    params: TokenRequest
  - get: checkToken
    resp: Me
    input: TokenParams
    params: TokenRequest
  - get: checkLogin
    resp: Me
    input: CheckParams
    params: CheckRequest

definitions:
  Me:
    properties:
      token:
        type: string
      expirationDate:
        type: string
      user:
        $ref: User
    required: [token, expirationDate, user]

  Success:
    $ref: 'apiTypes#/definitions/SuccessfulResponse'

  TokenParams:
    properties:
      token:
        type: string
      expirationDate:
        type: string
    required: [token]

  TokenRequest:
    properties:
      params:
        $ref: '#/definitions/TokenParams'
    required: [params]

  CheckAuth:
    properties:
      id:
        type: string
      name:
        type: string
      email:
        type: string
        format: email

  CheckParams:
    properties:
      type:
        type: string
        enum: [facebook]
      auth:
        $ref: '#/definitions/CheckAuth'
    required: [type, auth]

  CheckRequest:
    properties:
      params:
        $ref: '#/definitions/CheckParams'
    required: [params]

  LoginParams:
    properties:
      email:
        type: string
        format: email
      password:
        type: string
    required: [email, password]

  LoginRequest:
    properties:
      params:
        $ref: '#/definitions/LoginParams'
    required: [params]
