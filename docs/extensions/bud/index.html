<!DOCTYPE html>
<html>
  <head>
    <base href="/">
    <meta lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no"><!--[if lt IE 9]>
    <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <script src="https://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->
    <title>Grown // Bud (#ccb9f59)</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/highlight.js/styles/default.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sorts+Mill+Goudy">
  </head>
  <body class="reset">
    <script>
      /* eslint-disable */
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', '', 'auto');
      ga('send', 'pageview');
      /* eslint-enable */
      
    </script>
    <main id="wrapper">
      <div class="body" id="content">
        <main><a id="menu" href="./#sidebar">&#9776;</a>
          <h1>Bud <small><a href="//github.com/grownjs/jamming/blob/master/src/pages/docs/extensions/bud.md" target="_blank">âœŽ</a></small></h1><p>The foundation of the whole framework is this, it provides the DSL
used by all extensions, expose common utils, etc.</p>
<pre class="hljs"><code class="lang-js"><span class="hljs-comment">/* @runkit */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Grown</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@grown/bud&#x27;</span>)();
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Util</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@grown/bud/util&#x27;</span>);

<span class="hljs-comment">// extends the Grown-container</span>
<span class="hljs-title class_">Grown</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">$, util</span>) =&gt;</span> {
  <span class="hljs-title function_">assert</span>($ === <span class="hljs-title class_">Grown</span>);
  <span class="hljs-title function_">assert</span>(util === <span class="hljs-title class_">Util</span>);
});

<span class="hljs-comment">// build a promise-guard for callbacks</span>
<span class="hljs-keyword">const</span> cb = <span class="hljs-title class_">Grown</span>.<span class="hljs-title function_">do</span>(<span class="hljs-function"><span class="hljs-params">rescue</span> =&gt;</span> {
  <span class="hljs-title function_">rescue</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
    <span class="hljs-comment">// you can use this block to</span>
    <span class="hljs-comment">// catch-up things on a failure</span>
    <span class="hljs-title function_">assert</span>(e <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>);
  });

  <span class="hljs-comment">// any errors thrown here will reject</span>
  <span class="hljs-comment">// the created promise, also they&#x27;ll be</span>
  <span class="hljs-comment">// logged through `Util.getLogger().error`</span>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;E_FAILURE&#x27;</span>);
});

<span class="hljs-title function_">cb</span>();

<span class="hljs-comment">// ./exts/Test/handler/index.js</span>
<span class="hljs-comment">// module.exports = function () {</span>
<span class="hljs-comment">//   return 42;</span>
<span class="hljs-comment">// };</span>

<span class="hljs-comment">// load additional definitions</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Exts</span> = <span class="hljs-title class_">Grown</span>.<span class="hljs-title function_">load</span>(<span class="hljs-string">`<span class="hljs-subst">${__dirname}</span>/exts`</span>);

<span class="hljs-comment">// locate the dependency</span>
<span class="hljs-title function_">assert</span>(<span class="hljs-title class_">Exts</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Test&#x27;</span>).<span class="hljs-title function_">handler</span>() === <span class="hljs-number">42</span>);

<span class="hljs-comment">// don&#x27;t do this!</span>
<span class="hljs-comment">// new Grown();</span>
</code></pre>
<blockquote>
<p>If you uncomment <code>// new Grown()</code> and re-run the code it&#39;ll throw an error since <code>Server</code> is not available! ðŸ’£</p>
</blockquote>
<hr>
<h3 id="public-props-var-static-var">Public props <var>static</var></h3>
<ul>
<li><code>argv</code> &mdash; Parsed argv from command-line.</li>
<li><code>cwd</code> &mdash; Current working directory.</li>
<li><code>env</code> &mdash; Current <code>process.env.NODE_ENV</code> value.</li>
</ul>
<h3 id="public-methods-var-static-var">Public methods <var>static</var></h3>
<ul>
<li><code>do(body)</code> &mdash; Wraps code into promises with <code>rescue</code> abilities.</li>
<li><code>use(module)</code> &mdash; Register custom extensions from external modules.</li>
<li><code>new([options])</code> &mdash; Shortcut for <code>new Grown(...)</code> constructor.</li>
<li><code>defn(name, value)</code> &mdash; Set static values into the <code>Grown</code> container, once.</li>
<li><code>load(cwd[, hooks])</code> &mdash; Build module definitions from this directory.
If <code>hooks</code> are given, found modules will be passed to them, so they can be
extended or completely replaced.</li>
</ul>
<hr>
<p>âž¯ Next: <a href="./docs/extensions/cli">Extensions &rangle; CLI</a></p>

        </main>
      </div>
      <aside class="inverted" id="sidebar">
        <div class="body">
          <h1>
            <a href=".">Grown</a>
          </h1>
          <p>Experimental DSL for web-apps</p>
          <div class="sp"><a href="http://badge.fury.io/js/grown" target="_blank"><img src="//badge.fury.io/js/grown.svg"></a><a href="//codecov.io/gh/grownjs/grown" target="_blank"><img src="//codecov.io/gh/grownjs/grown/branch/master/graph/badge.svg"></a><a href="//github.com/grownjs/grown/actions" target="_blank"><img src="//github.com/grownjs/grown/workflows/build/badge.svg"></a></div>
          <ul class="mt reset">
            <li>
              <h3 class="reset">APIs</h3>
              <ul class="pl reset">
                <li>
                  <a href=".">Installation</a>
                </li>
                <li>
                  <a aria-current="page" href="./docs">The interface</a>
                </li>
                <li>
                  <a href="./docs/command-line">Command line</a>
                </li>
              </ul>
            </li>
            <li>
              <h3 class="reset">Add-ons</h3>
              <ul class="pl reset">
                <li>
                  <a aria-current="page" href="./docs/extensions">Extensions</a>
                </li>
                <li>
                  <a href="./docs/connection">Connection</a>
                </li>
                <li>
                  <a href="./docs/middlewares">Middlewares</a>
                </li>
              </ul>
            </li>
            <li>
              <h3 class="reset">Data-layer</h3>
              <ul class="pl reset">
                <li>
                  <a href="./docs/database">Models</a>
                </li>
                <li>
                  <a href="./docs/validation">Schemas</a>
                </li>
              </ul>
            </li>
            <li>
              <h3 class="reset">Controllers</h3>
              <ul class="pl reset">
                <li>
                  <a href="./docs/controllers">Web</a>
                </li>
                <li>
                  <a href="./docs/controllers/grpc">GRPC</a>
                </li>
                <li>
                  <a href="./docs/controllers/graphql">GraphQL</a>
                </li>
              </ul>
            </li>
            <li>
              <h3 class="reset">Unit-testing</h3>
              <ul class="pl reset">
                <li>
                  <a href="./docs/testing">Server</a>
                </li>
                <li>
                  <a href="./docs/testing/schema">Schema</a>
                </li>
                <li>
                  <a href="./docs/testing/handlers">Handlers</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </aside>
    </main>
    <script>window.__runkit__ = {"preamble":{"contents":"const fs = require('fs');\nconst assert = require('assert'); // eslint-disable-line\n\nfs.mkdirSync('./exts');\nfs.mkdirSync('./exts/Test');\nfs.mkdirSync('./exts/Test/handler');\n\nfs.writeFileSync('./exts/Test/handler/index.js', `\n  module.exports = function () { return 42; };\n`);\n"}};</script>
    <script src="//embed.runkit.com"></script>
    <script src="scripts.js"></script>
  </body>
</html>