<!DOCTYPE html><html><head><base href="/"><meta lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="HandheldFriendly" content="true"><meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no"><!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><script src="//css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]--><title>FTW</title><link rel="stylesheet" href="styles.css"><style>pre { overflow:auto }</style></head><body><main style="margin-left:20em;"><h2 id="asset-pipeline">Asset pipeline</h2>
<p><strong>Tarima</strong> is used for that hard-thing: frontend.</p>
<p>&mdash; Default settings:</p>
<pre><code class="lang-js">{
  // all sources will be relativized from this &quot;cwd&quot;
  &quot;cwd&quot;: &quot;.&quot;,

  // source files are watched/scanned from here
  &quot;src&quot;: [
    &quot;app/views&quot;,
    &quot;app/assets&quot;
  ],

  // additional sources to watch for changes
  // on any, dependant sources will be notified
  &quot;watch&quot;: [
    &quot;app/server.js&quot;,
    &quot;app/models&quot;,
    &quot;app/controllers&quot;,
    &quot;boot&quot;,
    &quot;config&quot;,
    &quot;.env&quot;,
    &quot;package.json&quot;
  ],

  // source files filtering, e.g.
  // &quot;skip all underscored files/directories&quot;
  &quot;filter&quot;: [
    &quot;!_*&quot;,
    &quot;!**/_*&quot;,
    &quot;!**/_*/**&quot;
  ],

  // only scripts matching this globs are bundled
  &quot;bundle&quot;: [
    &quot;**/views/**/*.{md,pug}&quot;,
    &quot;**/javascripts/**&quot;
  ],

  // quick renaming patterns as &quot;FROM_GLOB:TO_PATH&quot;
  // /1 and /2 will slice their fullpath, e.g.
  // &quot;app/views/foo/bar.js&quot; =&gt; &quot;views/foo/bar.js&quot;
  // &quot;app/assets/stylesheets/foo.css&quot; =&gt; &quot;public/stylesheets/foo.css&quot;
  &quot;rename&quot;: [
    &quot;**/views/**:{fullpath/1}&quot;,
    &quot;**/assets/**:public/{fullpath/2}&quot;
  ],

  // ignore sources from read/watch (globs ala-gitignore)
  // useful in case you don&#39;t have &quot;ignoreFiles&quot;
  &quot;ignore&quot;: [
    &quot;.DS_Store&quot;,
    &quot;.tarima&quot;,
    &quot;*.swp&quot;,
    &quot;.env&quot;
  ],

  // same as &quot;ignore&quot; but parse ignoreFiles&#39;s files and
  // append its values as regular &quot;ignore&quot; globs
  &quot;ignoreFiles&quot;: [
    &quot;.gitignore&quot;
  ],

  // general-purpose plugins:
  // talavera is used for building images and sprites
  &quot;plugins&quot;: [
    &quot;talavera&quot;
  ],

  // development-only plugins:
  // tarima-lr provides live-reload integration
  &quot;devPlugins&quot;: [
    &quot;tarima-lr&quot;
  ],

  // automatic source prefixing, e.g. &quot;foo.js&quot; =&gt; &quot;foo.es6.js&quot;
  &quot;extensions&quot;: {
    &quot;js&quot;: &quot;es6&quot;,
    &quot;css&quot;: &quot;less&quot;
  },

  // custom settings for plugins
  &quot;pluginOptions&quot;: {
    &quot;talavera&quot;: {
      &quot;dest&quot;: &quot;public/images&quot;,
      &quot;public&quot;: &quot;build/public&quot;
    }
  },

  // custom settings for bundling
  &quot;bundleOptions&quot;: {
    &quot;rollup&quot;: {
      &quot;format&quot;: &quot;iife&quot;,
      &quot;plugins&quot;: [
        &quot;rollup-plugin-node-resolve&quot;,
        &quot;rollup-plugin-commonjs&quot;
      ],
      &quot;rollup-plugin-node-resolve&quot;: {
        &quot;module&quot;: true,
        &quot;jsnext&quot;: true,
        &quot;main&quot;: true,
        &quot;browser&quot;: true
      }
    }
  }
}
</code></pre>
<h3 id="static-files">Static files</h3>
<p>Any supported file that is not processed (see below) is just copied.</p>
<p>&mdash; If you need to render a static file just add a supported extension:</p>
<pre><code class="lang-text">User-agent: *
Allow: &lt;%= env.SITE_ROOT %&gt;
</code></pre>
<p>Source file <code>app/assets/robots.txt.ejs</code> is rendered to <code>public/robots.txt</code> dest.</p>
<blockquote>
<p>Make sure you install <code>yarn add ejs --dev</code> or <code>npm i ejs --save-dev</code> for <code>.ejs</code> files</p>
</blockquote>
<p>&mdash; If you need markup to be generated from templates use <code>.pug</code> instead:</p>
<pre><code class="lang-jade">doctype html
html
  head
    title Welcome to #{section.title}!
  body
    != yield || section.body
</code></pre>
<p>Source file <code>app/assets/welcome.pug</code> is rendered to <code>public/welcome.html</code> dest.</p>
<p>&mdash; If you prefer Markdown try using <code>.md</code> for having more fun:</p>
<pre><code class="lang-markdown"># About us
</code></pre>
<p>Source file <code>app/assets/about.md</code> is rendered to <code>public/about.html</code> dest.</p>
<h3 id="javascripts">Javascripts</h3>
<p>Bundle from <a href="https://github.com/tacoss/tarima#20---supported-engines">supported sources</a>: CoffeeScript, TypeScript, Svelte, Vue, etc.</p>
<p>&mdash; Just rename your source files for custom support:</p>
<pre><code class="lang-jade">//- app/assets/javascripts/_components/example.vue.pug

template
  h1 It works!

script.
  export default {
    mounted() {
      console.log(&#39;OSOM!&#39;);
    },
  };
</code></pre>
<p>&mdash; The source is not rendered (see <a href="#asset-pipeline">filter</a>), but can be loaded by an entry-point:</p>
<pre><code class="lang-js">// app/assets/javascripts/welcome.js

import Example from &#39;./_components/example.vue.pug&#39;;

new Example({
  el: &#39;#app&#39;,
});
</code></pre>
<p>&mdash; If you need ES6 async/await support:</p>
<ul>
<li>install <code>nodent</code> in your project</li>
<li>add <code>&quot;nodent&quot;: true</code> to your <code>bundleOptions</code></li>
</ul>
<p>&mdash; Known issues:</p>
<ul>
<li>using <code>async/await</code> within JSX simply won&#39;t work</li>
</ul>
<h3 id="stylesheets">Stylesheets</h3>
<p>&mdash; Same as <code>.js</code> files but for LESS, Sass, PostCSS or Styl:</p>
<pre><code class="lang-css">/* app/assets/stylesheets/example.post.css */

::root {
  --color: red;
}

.error {
  color: var(--color);
}
</code></pre>
<p>Source file is saved to <code>public/stylesheets/example.css</code> dest.</p>
<h3 id="images-sprites">Images &amp; Sprites</h3>
<p><strong>Talavera</strong> will handle all found images and sprites within our sources.</p>
<p>&mdash; Files matching <code>**/images/**/*.{png,jpg,jpeg}</code>:</p>
<ul>
<li>are copied to <code>public/images</code></li>
<li>are referenced on <code>public/images/images.css</code></li>
</ul>
<p>&mdash; Files matching <code>**/sprites/**/*.{png,svg}</code>:</p>
<ul>
<li>are bundled to <code>public/images/sprites.svg</code> (<code>.svg</code> sources only)</li>
<li>are bundled to <code>public/images/sprites.png</code> (<code>.png</code> files only)</li>
<li>are referenced on <code>public/images/sprites.css</code> (<code>.png</code> files only)</li>
</ul>
<p>&mdash; Exported sources are grouped by their immediate dirname:</p>
<p>Given <code>app/assets/sprites/foo/bar.png</code> the generated files are:</p>
<ul>
<li><code>public/images/foo.css</code></li>
<li><code>public/images/foo.png</code></li>
<li><code>public/images/foo.svg</code></li>
</ul>
<p>&mdash; Exported sources can be rendered using a shared view or partial:</p>
<pre><code class="lang-pug">//- app/views/shared/icons.pug

&lt;@includeTag &quot;images/sprites.css&quot;&gt;
&lt;@destFile &quot;public/images/sprites.svg&quot;&gt;
&lt;@image &quot;salads&quot;&gt;
&lt;@icon &quot;npm&quot;&gt;
&lt;@svg &quot;agenda&quot;&gt;
</code></pre>
<p>Then call <code>view()</code> to render the previous fragment:</p>
<pre><code class="lang-js">conn.view(&#39;shared/icons.html&#39;, { as: &#39;resources&#39; });
</code></pre>
<p>It will create a <code>resources</code> local available on the layout.</p>
<blockquote>
<p>This feature is available only during compilation and just for markup sources</p>
</blockquote>
<h3 id="templating-views">Templating (views)</h3>
<p>&mdash; If you like exotic stuff, try <code>.jsx</code>:</p>
<pre><code class="lang-jsx">// app/views/foo/bar.jsx

module.exports = (locals, h) =&gt; &lt;div&gt;
  &lt;h1&gt;It works!&lt;/h1&gt;
  &lt;p&gt;Hello, ${locals.name}.&lt;/p&gt;
&lt;/div&gt;;
</code></pre>
<p>&mdash; If you prefer Pug templates use <code>.js.pug</code>:</p>
<pre><code class="lang-pug">//- app/views/foo/bar.js.pug

div
  h1 It works!
  p Hello, #{name}.
</code></pre>
<p>&mdash; If you want to pre-compile Markdown switch to <code>.js.md</code>:</p>
<pre><code class="lang-md">&gt; OSOM!
</code></pre>
<ul>
<li><a href="/">back</a></li>
</ul>
</main><aside style="position:fixed;bottom:0;top:0;max-width:20em;overflow:auto;"><ul><li><a href="/">home</a></li><li><a href="/docs">docs</a><ul><li><a href="/docs/initialization">Initialization</a></li><li><a href="/docs/interactive-mode">Interactive mode</a></li><li><a href="/docs/controllers">Controllers</a><ul><li><a href="/docs/controllers#routing">Routing</a></li><li><a href="/docs/controllers#definition">Definition</a></li><li><a href="/docs/controllers#end-responses">End responses</a></li><li><a href="/docs/controllers#testing-actions">Testing actions</a></li><li><a href="/docs/controllers#interactive-mode-fetch">Interactive mode (fetch)</a></li></ul></li><li><a href="/docs/models">Models</a><ul><li><a href="/docs/models#json-schema">JSON-Schema</a></li><li><a href="/docs/models#model-syncing">Model syncing</a></li><li><a href="/docs/models#testing-models">Testing models</a></li><li><a href="/docs/models#interactive-mode-models">Interactive mode (models)</a></li></ul></li><li><a href="/docs/views">Views</a><ul><li><a href="/docs/views#functions-as-templates">Functions as templates</a></li><li><a href="/docs/views#pre-compiled-templates">Pre-compiled templates</a></li><li><a href="/docs/views#layouts-blocks">Layouts &amp; blocks</a></li><li><a href="/docs/views#testing-views">Testing views</a></li><li><a href="/docs/views#interactive-mode-render">Interactive mode (render)</a></li></ul></li><li><a href="/docs/booting">Booting</a><ul><li><a href="/docs/booting#server">Server</a></li><li><a href="/docs/booting#api">API</a></li><li><a href="/docs/booting#hooks">Hooks</a></li><li><a href="/docs/booting#plugins">Plugins</a></li><li><a href="/docs/booting#middlewares">Middlewares</a></li><li><a href="/docs/booting#testing-the-app">Testing the app</a></li><li><a href="/docs/booting#interactive-mode-reload">Interactive mode (reload)</a></li></ul></li><li><strong><a class="here" href="/docs/assets">Assets</a></strong><ul><li><a href="/docs/assets#static-files">Static files</a></li><li><a href="/docs/assets#javascripts">Javascripts</a></li><li><a href="/docs/assets#stylesheets">Stylesheets</a></li><li><a href="/docs/assets#images-sprites">Images &amp; Sprites</a></li><li><a href="/docs/assets#templating-views">Templating (views)</a></li></ul></li></ul></li></ul></aside></body></html>