<!DOCTYPE html>
<html>
  <head>
    <base href="/">
    <meta lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no"><!--[if lt IE 9]>
    <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <script src="https://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->
    <title>Grown // The interface</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/highlight.js/styles/default.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sorts+Mill+Goudy">
  </head>
  <body class="reset">
    <main id="wrapper">
      <aside class="inverted" id="sidebar">
        <div class="body">
          <h1>Grown</h1>
          <p>Experimental DSL for web applications</p>
          <div class="sp"><a href="//travis-ci.org/pateketrueke/grown" target="_blank"><img src="//api.travis-ci.org/pateketrueke/grown.svg"></a><a href="//codecov.io/gh/pateketrueke/grown" target="_blank"><img src="//codecov.io/gh/pateketrueke/grown/branch/master/graph/badge.svg"></a></div>
          <ul class="mt reset">
            <li><a href="/">Installation</a>
            </li>
            <li><strong><a class="here" href="/docs">The interface</a></strong>
            </li>
            <li><a href="/docs/command-line">Command line</a>
            </li>
            <li><a href="/docs/extensions">Extensions</a>
            </li>
            <li><a href="/docs/connection">Connection</a>
            </li>
            <li><a href="/docs/middlewares">Middlewares</a>
            </li>
          </ul>
        </div>
      </aside>
      <div class="body" id="content">
        <main>
          <h1>The interface</h1><p>Our main module is a factory which takes two optional arguments:</p>
<pre class="hljs"><code class="lang-js"><span class="hljs-keyword">const</span> cwd = process.cwd();
<span class="hljs-keyword">const</span> argv = process.argv.slice(<span class="hljs-number">2</span>);

<span class="hljs-keyword">const</span> Grown = <span class="hljs-built_in">require</span>(<span class="hljs-string">'grown'</span>)(cwd, argv);
</code></pre>
<blockquote>
<p>If no arguments are given both values will be taken from the current <code>process</code></p>
</blockquote>
<p>Once created, the <code>Grown</code> function behaves like a container, it can be called to
store and retrieve definitions from it.</p>
<pre class="hljs"><code class="lang-js"><span class="hljs-comment">// register an extension</span>
Grown(<span class="hljs-string">'Application'</span>, {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Example'</span>,
});

<span class="hljs-comment">// both calls are equivalent</span>
<span class="hljs-built_in">console</span>.log(Grown.Application.name);
<span class="hljs-built_in">console</span>.log(Grown(<span class="hljs-string">'Application.name'</span>));
</code></pre>
<p>See: <a href="https://www.npmjs.com/package/object-new#definitions"><code>object-new</code> definitions</a></p>
<hr>
<h3 id="static-props">Static props</h3>
<ul>
<li><code>version</code> &mdash; will return the framework&#39;s version</li>
<li><code>argv</code> &mdash; parsed argv from command-line</li>
<li><code>cwd</code> &mdash; current working directory</li>
<li><code>env</code> &mdash; current <code>process.env.NODE_ENV</code></li>
</ul>
<p>➯ Next: <a href="./docs/command-line">Command line</a></p>
<hr>
<h3 id="static-methods">Static methods</h3>
<ul>
<li><code>do(body)</code> &mdash; wraps code into promises</li>
<li><code>use(module)</code> &mdash; register custom extensions</li>
<li><code>new([options])</code> &mdash; shortcut for <code>new Grown(...)</code></li>
<li><code>load(cwd[, suffix])</code> &mdash; allow to collect extensions</li>
</ul>
<p>➯ Next: <a href="./docs/extensions">Extensions</a></p>
<hr>
<h2 id="the-instance">The instance</h2>
<p>When you invoke the <code>Grown</code> constructor a new <code>Server</code> instance is created, e.g.</p>
<pre class="hljs"><code class="lang-js"><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> Grown({
  <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>,
  <span class="hljs-attr">baz</span>: {
    <span class="hljs-attr">buzz</span>: <span class="hljs-string">'bazzinga'</span>,
  },
});
</code></pre>
<p>Received options are accessible only within the connection:</p>
<pre class="hljs"><code class="lang-js">server.mount(<span class="hljs-function">(<span class="hljs-params">ctx, options</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(options(<span class="hljs-string">'foo'</span>)); <span class="hljs-comment">// bar</span>
  <span class="hljs-built_in">console</span>.log(options(<span class="hljs-string">'baz.buzz'</span>)); <span class="hljs-comment">// bazzinga</span>
});
</code></pre>
<p>Options can resolve to default values, otherwise they&#39;ll throw an error:</p>
<pre class="hljs"><code class="lang-js"><span class="hljs-comment">// it's fine to have default values</span>
<span class="hljs-keyword">const</span> x = options(<span class="hljs-string">'some.value'</span>, <span class="hljs-number">42</span>);

<span class="hljs-comment">// but some options should be present!</span>
<span class="hljs-keyword">const</span> y = options(<span class="hljs-string">'a.required.setting.here'</span>);
</code></pre>
<p>➯ Next: <a href="./docs/connection">Connection</a></p>
<hr>
<h3 id="instance-methods">Instance methods</h3>
<ul>
<li><code>on(e, cb)</code> &mdash; subscribe to events</li>
<li><code>off(e, cb)</code> &mdash; unsubscribe from events</li>
<li><code>once(e, cb)</code> &mdash; subscribe (once) to events</li>
<li><code>emit(e[, ...])</code> &mdash; broadcast events to listeners</li>
<li><code>run(scope)</code> &mdash; dispatch a request through the middleware</li>
<li><code>plug(extensions)</code> &mdash; extends the server with additional functionality</li>
<li><code>mount(middleware)</code> &mdash; append middleware to the server instance</li>
<li><code>listen([connection])</code> &mdash; starts a new web server connection</li>
</ul>
<p>➯ Next: <a href="./docs/middlewares">Middlewares</a></p>

        </main>
      </div>
    </main>
    <script>window.__runkit__ = {};</script>
    <script src="https://embed.runkit.com"></script>
    <script src="scripts.js"></script>
  </body>
</html>